(this["webpackJsonpphp-cms-client"]=this["webpackJsonpphp-cms-client"]||[]).push([[0],{19:function(e,t,n){e.exports=n(37)},31:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(8),c=n.n(s),u=n(6),i=n(3),o=n.n(i),l=n(4),f=n(1),h=n(2),p=n(7),d=function(){function e(t){Object(f.a)(this,e),this.status=200,this.success=!1,this.data=void 0,this.message="",this.data=t}return Object(h.a)(e,[{key:"deserialize",value:function(e){return this.status=parseInt(e.status),this.success=!!e.success,e.message&&(this.message="".concat(e.message)),this}}]),e}(),E=!0,O="https://jaspress.lichte.info/api",b="http://localhost:8073/Projects/PHP-CMS/api",m=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"get",value:function(t,n){return new Promise(function(){var r=Object(l.a)(o.a.mark((function r(a,s){var c,u,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c=new URL("".concat(e.baseUrl).concat(t))).searchParams.delete("license"),c.searchParams.append("license",n),r.next=5,fetch(c.href);case 5:return u=r.sent,r.next=8,u.json();case 8:i=r.sent,a(new d(i).deserialize(i));case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"post",value:function(t,n){return function(r){return new Promise(function(){var a=Object(l.a)(o.a.mark((function a(s,c){var u;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(e.baseUrl).concat(t),{method:"POST",body:JSON.stringify(Object(p.a)({},r,{license:n}))});case 2:u=a.sent.json(),s(new d(u).deserialize(u));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}}},{key:"makeGetRequest",value:function(){var t=Object(l.a)(o.a.mark((function t(n,r){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(r,S.license);case 2:return a=t.sent,t.abrupt("return",new d(n.deserialize(a.data.data)).deserialize(a));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"makePostRequest",value:function(){var t=Object(l.a)(o.a.mark((function t(n,r,a){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post(r,S.license)(a);case 2:return s=t.sent,t.abrupt("return",new d(n.deserialize(s.data.data)).deserialize(s));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();m.baseUrl=E?O:b;var v=m,g=function(){function e(){Object(f.a)(this,e),this.key="",this.value="",this.defaultValue="",this.cssProperty=null}return Object(h.a)(e,[{key:"deserialize",value:function(e){return this.key=e.key,this.value=e.value,this.defaultValue=e.defaultValue,e.cssProperty&&(this.cssProperty=e.cssProperty),this}}]),e}(),j=function(){function e(){Object(f.a)(this,e),this.settings=[],this.user=null}return Object(h.a)(e,[{key:"deserialize",value:function(e){return e?(e.settings&&(this.settings=e.settings.map((function(e){return(new g).deserialize(e)}))),e.user&&(this.settings=e.user),this):this}}]),e}(),R=function(){function e(){Object(f.a)(this,e),this.content="",this.htmlContent="",this.description=""}return Object(h.a)(e,[{key:"deserialize",value:function(e){return e.content&&(this.content=e.content),e.htmlContent&&(this.htmlContent=e.htmlContent),e.description&&(this.description=e.description),this}}]),e}(),y=function(){function e(){Object(f.a)(this,e),this.slug="",this.title="",this.markdown=null}return Object(h.a)(e,[{key:"deserialize",value:function(e){return this.slug=e.slug,this.title=e.title,this.markdown=(new R).deserialize(e.markdown),this}}]),e}(),k=function(){function e(){Object(f.a)(this,e),this.page=null}return Object(h.a)(e,[{key:"deserialize",value:function(e){return e?(e.page&&(this.page=(new y).deserialize(e.page)),this):this}}]),e}(),w=function(){function e(){Object(f.a)(this,e),this.baseApiUrl=""}return Object(h.a)(e,[{key:"deserialize",value:function(e){return e?(this.baseApiUrl="".concat(e.base_api_url),this):this}}]),e}(),S=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"getConfig",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.makeGetRequest(new w,"/config/get.php"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"preflight",value:function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.license=n,t.abrupt("return",v.makeGetRequest(new j,"/preflight.php"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPage",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.makeGetRequest(new k,"/page/get.php?p=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();S.license="";var N,T=n(5);!function(e){e[e.SET_SETTINGS=0]="SET_SETTINGS",e[e.SET_ERROR=1]="SET_ERROR"}(N||(N={}));var _=N,I=function(e){return e.settings},P=function(e){return e.error};function z(e){var t,n=e.settings,r="html {\n        ".concat(n.filter((function(e){return null!=e.cssProperty})).map((function(e){return"".concat(e.cssProperty,": ").concat(e.value,";")})).join(""),"\n    }");return document.title=(null===(t=n.find((function(e){return"APP_NAME"===e.key})))||void 0===t?void 0:t.value)||"",a.a.createElement("style",null,r)}var C,x=n(15),L=(n(31),function(e){var t=e.md,n=Object(r.useRef)();return a.a.createElement("div",{className:"markdown",ref:n},a.a.createElement(x.a,{options:{}},t))}),U=n(17),V=n.n(U);n(36);function A(e){var t=e.color,n=e.loading,s=e.delayMs,c=Object(r.useState)(n),i=Object(u.a)(c,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){n||setTimeout((function(){return l(!1)}),s||0)}),[n,s]),a.a.createElement("div",{className:"loading loading-fs","data-active":o?"yes":"no"},a.a.createElement(V.a,{color:t,loading:!0,size:25}))}!function(e){e[e.INVALID_LICENSE=0]="INVALID_LICENSE",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.NOT_FOUND=2]="NOT_FOUND"}(C||(C={}));var D=C;function G(e){switch(e){case 200:return null;case 404:return C.NOT_FOUND;case 500:return C.SERVER_ERROR}return C.SERVER_ERROR}function F(e){var t=function(e){switch(e){case D.INVALID_LICENSE:return a.a.createElement("p",null,"Invalid License!");case D.SERVER_ERROR:return a.a.createElement("p",null,"Unexpected Server error");case D.NOT_FOUND:return a.a.createElement("p",null,"Not found")}return a.a.createElement("p",null,"An error occurred")}(e.errorType);return a.a.createElement("section",null,t)}function q(e){var t,n,s=e.slug,c=Object(r.useState)(!0),i=Object(u.a)(c,2),o=i[0],l=i[1],f=Object(r.useState)(null),h=Object(u.a)(f,2),p=h[0],d=h[1],E=Object(r.useState)(null),O=Object(u.a)(E,2),b=O[0],m=O[1],v=Object(T.c)(I);return Object(r.useEffect)((function(){S.getPage(s).then((function(e){l(!1),200===e.status?d(e.data.page):m(G(e.status))}))}),[s]),Object(r.useEffect)((function(){null!=p&&(document.title=p.title)}),[p]),a.a.createElement("section",null,a.a.createElement(A,{loading:o,color:(null===v||void 0===v||null===(t=v.find((function(e){return"ACCENT_COLOR"===e.key})))||void 0===t?void 0:t.value)||"",delayMs:500}),null==p?null==b?"":a.a.createElement(F,{errorType:b}):a.a.createElement(L,{md:(null===p||void 0===p||null===(n=p.markdown)||void 0===n?void 0:n.content)||""}))}function M(e){var t=e.license,n=Object(T.b)(),s=Object(T.c)(I),c=Object(T.c)(P),i=Object(r.useState)(!0),o=Object(u.a)(i,2),l=o[0],f=o[1];return Object(r.useEffect)((function(){t?S.getConfig().then((function(e){200!==e.status?n({type:_.SET_ERROR,error:G(e.status)}):(v.baseUrl=e.data.baseApiUrl,S.preflight(t).then(function(e){return function(t){200===t.status?e({type:_.SET_SETTINGS,settings:t.data.settings}):e({type:_.SET_ERROR,error:401===t.status?D.INVALID_LICENSE:G(t.status)})}}(n)))})):n({type:_.SET_ERROR,error:D.INVALID_LICENSE})}),[n,t]),Object(r.useEffect)((function(){null!=s&&f(!1)}),[s]),null!=c?a.a.createElement(F,{errorType:c}):l?a.a.createElement(a.a.Fragment,null):a.a.createElement(a.a.Fragment,null,null!=s&&a.a.createElement(z,{settings:s}),a.a.createElement(q,{slug:"start"}))}var J=function e(){Object(f.a)(this,e),this.settings=null,this.error=null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SET_SETTINGS:return Object(p.a)({},e,{settings:t.settings});case _.SET_ERROR:return Object(p.a)({},e,{error:t.error})}return e},H=n(9),K=Object(H.b)(B);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T.a,{store:K},a.a.createElement(M,{license:"123"}))),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.6c220dc6.chunk.js.map